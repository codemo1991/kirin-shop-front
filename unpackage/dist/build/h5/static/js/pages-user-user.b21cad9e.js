(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-user"],{"0780":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.tj-sction .tj-item[data-v-3c4c0290], .order-section .order-item[data-v-3c4c0290]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.tj-sction[data-v-3c4c0290], .order-section[data-v-3c4c0290]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around;-webkit-align-content:center;align-content:center;background:#fff;-webkit-border-radius:%?10?%;border-radius:%?10?%}.user-section[data-v-3c4c0290]{height:%?520?%;padding:%?100?% %?30?% 0;position:relative}.user-section .bg[data-v-3c4c0290]{position:absolute;left:0;top:0;width:100%;height:100%;-webkit-filter:blur(1px);filter:blur(1px);opacity:.7}.user-info-box[data-v-3c4c0290]{height:%?180?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:relative\n  /* z-index: 100; */}.user-info-box .portrait[data-v-3c4c0290]{width:%?130?%;height:%?130?%;border:%?5?% solid #fff;-webkit-border-radius:50%;border-radius:50%}.user-info-box .username[data-v-3c4c0290]{font-size:%?38?%;color:#303133;margin-left:%?20?%}.vip-card-box[data-v-3c4c0290]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;color:#f7d680;height:%?240?%;background:-webkit-gradient(linear,left top,right top,from(rgba(0,0,0,.7)),to(rgba(0,0,0,.8)));background:-webkit-linear-gradient(left,rgba(0,0,0,.7),rgba(0,0,0,.8));background:linear-gradient(left,rgba(0,0,0,.7),rgba(0,0,0,.8));-webkit-border-radius:%?16?% %?16?% 0 0;border-radius:%?16?% %?16?% 0 0;overflow:hidden;position:relative;padding:%?20?% %?24?%}.vip-card-box .card-bg[data-v-3c4c0290]{position:absolute;top:%?20?%;right:0;width:%?380?%;height:%?260?%}.vip-card-box .b-btn[data-v-3c4c0290]{position:absolute;right:%?20?%;top:%?16?%;width:%?132?%;height:%?40?%;text-align:center;line-height:%?40?%;font-size:%?22?%;color:#36343c;-webkit-border-radius:20px;border-radius:20px;background:-webkit-gradient(linear,left top,right top,from(#f9e6af),to(#ffd465));background:-webkit-linear-gradient(left,#f9e6af,#ffd465);background:linear-gradient(left,#f9e6af,#ffd465);z-index:1}.vip-card-box .tit[data-v-3c4c0290]{font-size:%?30?%;color:#f7d680;margin-bottom:%?28?%}.vip-card-box .tit .yticon[data-v-3c4c0290]{color:#f6e5a3;margin-right:%?16?%}.vip-card-box .e-b[data-v-3c4c0290]{font-size:%?24?%;color:#d8cba9;margin-top:%?10?%}.cover-container[data-v-3c4c0290]{background:#f8f8f8;margin-top:%?-150?%;padding:0 %?30?%;position:relative;background:#f5f5f5;padding-bottom:%?20?%}.cover-container .arc[data-v-3c4c0290]{position:absolute;left:0;top:%?-34?%;width:100%;height:%?36?%}.tj-sction .tj-item[data-v-3c4c0290]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;height:%?140?%;font-size:%?24?%;color:#75787d}.tj-sction .num[data-v-3c4c0290]{font-size:%?32?%;color:#303133;margin-bottom:%?8?%}.order-section[data-v-3c4c0290]{padding:%?28?% 0;margin-top:%?20?%}.order-section .order-item[data-v-3c4c0290]{width:%?120?%;height:%?120?%;-webkit-border-radius:%?10?%;border-radius:%?10?%;font-size:%?24?%;color:#303133}.order-section .yticon[data-v-3c4c0290]{font-size:%?48?%;margin-bottom:%?18?%;color:#fa436a}.order-section .icon-shouhoutuikuan[data-v-3c4c0290]{font-size:%?44?%}.history-section[data-v-3c4c0290]{padding:%?30?% 0 0;margin-top:%?20?%;background:#fff;-webkit-border-radius:%?10?%;border-radius:%?10?%}.history-section .sec-header[data-v-3c4c0290]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?28?%;color:#303133;line-height:%?40?%;margin-left:%?30?%}.history-section .sec-header .yticon[data-v-3c4c0290]{font-size:%?44?%;color:#5eba8f;margin-right:%?16?%;line-height:%?40?%}.history-section .h-list[data-v-3c4c0290]{white-space:nowrap;padding:%?30?% %?30?% 0}.history-section .h-list uni-image[data-v-3c4c0290]{display:inline-block;width:%?160?%;height:%?160?%;margin-right:%?20?%;-webkit-border-radius:%?10?%;border-radius:%?10?%}.notice-box[data-v-3c4c0290]{background:#fdefd8;padding:5px %?35?%}.notice-box .notice-detail[data-v-3c4c0290]{font-size:%?24?%;font-family:PingFang SC;font-weight:400;color:#cc953b}.notice-box .bindPhone[data-v-3c4c0290]{width:%?135?%;height:%?52?%;background:-webkit-gradient(linear,left top,right top,from(#e9b461),to(#eecc89));background:-webkit-linear-gradient(left,#e9b461,#eecc89);background:linear-gradient(90deg,#e9b461,#eecc89);-webkit-border-radius:%?26?%;border-radius:%?26?%;padding:0;font-size:%?26?%;font-family:PingFang SC;font-weight:500;color:#fff}\n/* 以下内容为分享 */.hideCanvasView[data-v-3c4c0290]{position:relative}.hideCanvas[data-v-3c4c0290]{position:fixed;top:%?-99999?%;left:%?-99999?%;z-index:-99999}.flex_row_c_c[data-v-3c4c0290]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.modalView[data-v-3c4c0290]{width:100%;height:100%;position:fixed;top:0;left:0;right:0;bottom:0;opacity:0;outline:0;-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-perspective:%?2500?%;perspective:%?2500?%;background:rgba(0,0,0,.6);-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:999}.modalView.show[data-v-3c4c0290]{opacity:1;-webkit-transform:scale(1);transform:scale(1);pointer-events:auto;z-index:9999}.flex_column[data-v-3c4c0290]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.backgroundColor-white[data-v-3c4c0290]{background-color:#fff}.border_radius_10px[data-v-3c4c0290]{-webkit-border-radius:10px;border-radius:10px}.padding1vh[data-v-3c4c0290]{padding:1vh}.posterImage[data-v-3c4c0290]{width:%?580?%}.flex_row[data-v-3c4c0290]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.marginTop2vh[data-v-3c4c0290]{margin-top:2vh}',""]),t.exports=e},"0fb6":function(t,e,i){i("c740"),i("d3b7"),i("ac1f"),i("25f0"),i("1276");var n=console.log,a={lineFeedTags:["<br />","<br/>","\r\n","\n\t","\r","\n"],tagetLineFeedTag:"❤",log:function(t){},showLoading:function(t,e){uni.showLoading({title:t,mask:e||!1})},hideLoading:function(){uni.hideLoading()},showToast:function(t,e){uni.showToast({title:t,icon:e||"none"})},getPosterUrl:function(t){var e=t.backgroundImage,i=t.type;t.formData;return new Promise((function(t,n){var a;if(e)a=e;else switch(i){case 1:a="";break;default:a="/static/1.png";break}a?t(a):n("背景图片路径不存在")}))},shareTypeListSheetArray:{array:[0,1,2,3,4,5]},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isPromise:function(t){return!!t&&("object"===typeof t||"function"===typeof t)&&"function"===typeof t.then},isNull:function(t){return null===t},isUndefined:function(t){return void 0===t},isUndef:function(t){return void 0===t},isNotNull_string:function(t){return null!==t&&void 0!==t&&""!==t},isFn:function(t){return t&&"function"===typeof t},getStorage:function(t,e,i){uni.getStorage({key:t,success:function(t){t.data&&""!=t.data?e&&e(t.data):i&&i()},fail:function(){i&&i()}})},setStorage:function(t,e){n("设置缓存"),n("key："+t),n("data："+JSON.stringify(e)),uni.setStorage({key:t,data:e})},setStorageSync:function(t,e){uni.setStorageSync(t,e)},getStorageSync:function(t){return uni.getStorageSync(t)},clearStorageSync:function(){uni.clearStorageSync()},removeStorageSync:function(t){uni.removeStorageSync(t)},getImageInfo:function(t,e,i){t=r(t),uni.getImageInfo({src:t,success:function(t){e&&"function"==typeof e&&e(t)},fail:function(t){i&&"function"==typeof i&&i(t)}})},downloadFile:function(t,e){t=r(t),uni.downloadFile({url:t,success:function(t){e&&"function"==typeof e&&e(t)}})},downloadFile_PromiseFc:function(t){return new Promise((function(e,i){"http"!==t.substring(0,4)?e(t):(t=r(t),n("url:"+t),uni.downloadFile({url:t,success:function(t){t&&t.tempFilePath?e(t.tempFilePath):i("not find tempFilePath")},fail:function(t){i(t)}}))}))},saveFile:function(t){uni.saveFile({tempFilePath:t,success:function(t){n("保存成功:"+JSON.stringify(t))}})},downLoadAndSaveFile_PromiseFc:function(t){return new Promise((function(e,i){n("准备下载并保存图片:"+t),"http"===t.substring(0,4)?(t=r(t),uni.downloadFile({url:t,success:function(t){n("下载背景图成功："+JSON.stringify(t)),t&&t.tempFilePath?e(t.tempFilePath):i("not find tempFilePath")},fail:function(t){i(t)}})):e(t)}))},checkFile_PromiseFc:function(t){return new Promise((function(e,i){uni.getSavedFileList({success:function(i){var n=i.fileList,a=n.findIndex((function(e){return e.filePath===t}));e(a)},fail:function(t){i(t)}})}))},removeSavedFile:function(t){uni.getSavedFileList({success:function(e){var i=e.fileList,n=i.findIndex((function(e){return e.filePath===t}));n>=0&&uni.removeSavedFile({filePath:t})}})},fileNameInPath:function(t){var e=t.split("/");return e[e.length-1]},getImageInfo_PromiseFc:function(t){return new Promise((function(e,i){n("准备获取图片信息:"+t),t=r(t),uni.getImageInfo({src:t,success:function(t){n("获取图片信息成功:"+JSON.stringify(t)),e(t)},fail:function(t){n("获取图片信息失败:"+JSON.stringify(t)),i(t)}})}))},previewImage:function(t){"string"==typeof t&&(t=[t]),uni.previewImage({urls:t})},actionSheet:function(t,e){for(var i=[],n=0;n<t.array.length;n++)switch(t.array[n]){case"sinaweibo":i[n]="新浪微博";break;case"qq":i[n]="QQ";break;case"weixin":i[n]="微信";break;case"WXSceneSession":i[n]="微信好友";break;case"WXSenceTimeline":i[n]="微信朋友圈";break;case"WXSceneFavorite":i[n]="微信收藏";break;case 0:i[n]="图文链接";break;case 1:i[n]="纯文字";break;case 2:i[n]="纯图片";break;case 3:i[n]="音乐";break;case 4:i[n]="视频";break;case 5:i[n]="小程序";break;default:break}this.showActionSheet(i,e)},showActionSheet:function(t,e){uni.showActionSheet({itemList:t,success:function(t){e&&"function"==typeof e&&e(t.tapIndex)}})},getProvider:function(t,e,i){var n=this;uni.getProvider({service:t,success:function(a){if(i){var r={};r.array=a.provider,n.actionSheet(r,(function(t){e&&"function"==typeof e&&e(a.provider[t])}))}else if("payment"==t){for(var o=a.provider,s=[],l=0;l<o.length;l++)"wxpay"==o[l]?s[l]={name:"微信支付",value:o[l],img:"/static/image/wei.png"}:"alipay"==o[l]&&(s[l]={name:"支付宝支付",value:o[l],img:"/static/image/ali.png"});e&&"function"==typeof e&&e(s)}else e&&"function"==typeof e&&e(a)}})}};function r(t){return t}t.exports=a},"1b33":function(t,e,i){"use strict";i.r(e);var n=i("50d5"),a=i("6272");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("cd1b");var o,s=i("f0c5"),l=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"3c4c0290",null,!1,n["a"],o);e["default"]=l.exports},"25cc":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.icon .mix-list-cell.b-b[data-v-4a25f54b]:after{left:%?90?%}.mix-list-cell[data-v-4a25f54b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:baseline;-webkit-align-items:baseline;align-items:baseline;padding:%?20?% %?30?%;line-height:%?60?%;position:relative}.mix-list-cell.cell-hover[data-v-4a25f54b]{background:#fafafa}.mix-list-cell.b-b[data-v-4a25f54b]:after{left:%?30?%}.mix-list-cell .cell-icon[data-v-4a25f54b]{-webkit-align-self:center;align-self:center;width:%?56?%;max-height:%?60?%;font-size:%?38?%}.mix-list-cell .cell-more[data-v-4a25f54b]{-webkit-align-self:center;align-self:center;font-size:%?30?%;color:#606266;margin-left:10px}.mix-list-cell .cell-tit[data-v-4a25f54b]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#303133;margin-right:%?10?%}.mix-list-cell .cell-tip[data-v-4a25f54b]{font-size:%?26?%;color:#909399}',""]),t.exports=e},2909:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=s(i("6005")),a=s(i("db90")),r=s(i("06c5")),o=s(i("3427"));function s(t){return t&&t.__esModule?t:{default:t}}function l(t){return(0,n.default)(t)||(0,a.default)(t)||(0,r.default)(t)||(0,o.default)()}},3427:function(t,e,i){"use strict";function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},"3d69":function(t,e,i){"use strict";function n(){uni.showModal({title:"温馨提示",content:"此时此刻需要您登录喔~",confirmText:"去登录",cancelText:"再逛会",success:function(t){t.confirm&&uni.navigateTo({url:"/pages/public/login"})}})}function a(t){for(var e=window.location.href,i=e.substr(e.lastIndexOf("?")+1).split("&"),n=0;n<i.length;n++){var a=i[n],r=a.split("=")[0],o=a.split("=")[1];if(r===t)return o}}i("baa5"),i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=a,t.exports={showUnloginModal:n,getUrlParam:a}},4403:function(t,e,i){var n=i("25cc");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("989ea0ce",n,!0,{sourceMap:!1,shadowMode:!1})},4892:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{typeList:{left:"icon-zuo",right:"icon-you",up:"icon-shang",down:"icon-xia"}}},props:{icon:{type:String,default:""},title:{type:String,default:"标题"},tips:{type:String,default:""},navigateType:{type:String,default:"right"},border:{type:String,default:"b-b"},hoverClass:{type:String,default:"cell-hover"},iconColor:{type:String,default:"#333"}},methods:{eventClick:function(){this.$emit("eventClick")}}};e.default=n},"50d5":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"user-section"},[i("v-uni-image",{staticClass:"bg",attrs:{src:"/static/group_detail_bg.png"}}),i("v-uni-view",{staticClass:"user-info-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navToLogin("/pages/public/login",1)}}},[i("v-uni-view",{staticClass:"portrait-box"},[i("v-uni-image",{staticClass:"portrait",attrs:{src:t.headImg?t.headImg:"/static/missing-face.png"}})],1),i("v-uni-view",{staticClass:"info-box"},[i("v-uni-text",{staticClass:"username"},[t._v(t._s(t.accountName||"点击登录"))])],1)],1),i("v-uni-view",{staticClass:"vip-card-box"},[i("v-uni-image",{staticClass:"card-bg",attrs:{src:"",mode:""}}),i("v-uni-view",{staticClass:"tit"},[i("v-uni-text",{staticClass:"yticon icon-iLinkapp-"}),t._v("熊猫集市")],1),i("v-uni-text",{staticClass:"e-m"}),i("v-uni-text",{staticClass:"e-b"})],1)],1),i("v-uni-view",{staticClass:"cover-container",style:[{transform:t.coverTransform,transition:t.coverTransition}]},[i("v-uni-image",{staticClass:"arc",attrs:{src:"/static/arc.png"}}),!t.hasLogin||t.isWxBind&&"N"!==t.isWxBind?t._e():i("v-uni-view",{staticClass:"notice-box tj-sction"},[i("v-uni-view",{staticClass:"notice-detail one-t",staticStyle:{"font-size":"15px","line-height":"25px"}},[t._v("为了账户安全，请绑定微信！")]),i("v-uni-button",{staticClass:"bindPhone ",staticStyle:{"margin-right":"5px","line-height":"25px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindWx()}}},[t._v("去绑定")])],1),!t.hasLogin||t.isPhoneBind&&"N"!==t.isPhoneBind?t._e():i("v-uni-view",{staticClass:"notice-box tj-sction"},[i("v-uni-view",{staticClass:"notice-detail one-t",staticStyle:{"font-size":"15px","line-height":"25px"}},[t._v("为了账户安全，请绑定手机！")]),i("v-uni-button",{staticClass:"bindPhone ",staticStyle:{"margin-right":"5px","line-height":"25px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindPhone()}}},[t._v("去绑定")])],1),i("v-uni-view",{staticClass:"tj-sction"},[i("v-uni-view",{staticClass:"tj-item"},[i("v-uni-text",{staticClass:"num"},[t._v(t._s(t.accountRemain))]),i("v-uni-text",[t._v("余额")])],1),i("v-uni-view",{staticClass:"tj-item"},[i("v-uni-text",{staticClass:"num"},[t._v("0")]),i("v-uni-text",[t._v("佣金")])],1),i("v-uni-view",{staticClass:"tj-item"},[i("v-uni-text",{staticClass:"num"},[t._v("0")]),i("v-uni-text",[t._v("积分")])],1)],1),i("v-uni-view",{staticClass:"order-section"},[i("v-uni-view",{staticClass:"order-item",attrs:{"hover-class":"common-hover","hover-stay-time":50},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo("/pages/order/order?state=0")}}},[i("v-uni-text",{staticClass:"yticon icon-shouye"}),i("v-uni-text",[t._v("全部订单")])],1),i("v-uni-view",{staticClass:"order-item",attrs:{"hover-class":"common-hover","hover-stay-time":50},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo("/pages/order/order?state=1")}}},[i("v-uni-text",{staticClass:"yticon icon-daifukuan"}),i("v-uni-text",[t._v("待发货")])],1),i("v-uni-view",{staticClass:"order-item",attrs:{"hover-class":"common-hover","hover-stay-time":50},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo("/pages/order/order?state=2")}}},[i("v-uni-text",{staticClass:"yticon icon-yishouhuo"}),i("v-uni-text",[t._v("配货中")])],1),i("v-uni-view",{staticClass:"order-item",attrs:{"hover-class":"common-hover","hover-stay-time":50},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo("/pages/order/order?state=5")}}},[i("v-uni-text",{staticClass:"yticon icon-shouhoutuikuan"}),i("v-uni-text",[t._v("退款/售后")])],1)],1),i("v-uni-view",{staticClass:"history-section icon"},[i("list-cell",{attrs:{icon:"icon-share",iconColor:"#9789f7",title:"联系客服",tips:"商品咨询/系统注册"},on:{eventClick:function(e){arguments[0]=e=t.$handleEvent(e),t.copyWx("sad535445345")}}}),i("list-cell",{attrs:{icon:"icon-iconfontweixin",iconColor:"#e07472",title:"我的账单",tips:"您的资金流水明细"},on:{eventClick:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo("/pages/money/waterBill")}}}),i("list-cell",{attrs:{icon:"icon-dizhi",iconColor:"#5fcda2",title:"地址管理",tips:"收货地址管理"},on:{eventClick:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo("/pages/address/address")}}}),t.hasLogin?i("list-cell",{attrs:{icon:"icon-share",iconColor:"#9789f7",title:"分享",tips:"邀请好友更多优惠"},on:{eventClick:function(e){arguments[0]=e=t.$handleEvent(e),t.shareFc()}}}):t._e(),0==t.hasLogin?i("list-cell",{attrs:{icon:"icon-shezhi1",iconColor:"#e07472",title:"去登录"},on:{eventClick:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo("/pages/public/login",1)}}}):t._e(),1==t.hasLogin?i("list-cell",{attrs:{icon:"icon-shezhi1",iconColor:"#e07472",title:"我的团员",tips:"查看所有团员"},on:{eventClick:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo("/pages/user/members/members",1)}}}):t._e()],1)],1),i("QSPopup",{ref:"popup"},[i("v-uni-view",{staticClass:"flex_column"},[i("v-uni-view",{staticClass:"backgroundColor-white padding1vh border_radius_10px"},[i("v-uni-image",{staticClass:"posterImage",attrs:{src:t.posterImage||"",mode:"widthFix"}})],1),i("v-uni-view",{staticClass:"flex_row marginTop2vh"},[i("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.saveImage()}}},[t._v("保存图片")]),i("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.share()}}},[t._v("分享图片")])],1)],1)],1),i("v-uni-view",{staticClass:"hideCanvasView"},[i("v-uni-canvas",{staticClass:"hideCanvas",style:{width:(t.poster.width||10)+"px",height:(t.poster.height||10)+"px"},attrs:{id:"default_PosterCanvasId","canvas-id":"default_PosterCanvasId"}})],1)],1)},r=[]},"542d":function(t,e,i){"use strict";var n=i("23e7"),a=i("d039"),r=i("408a"),o=1..toPrecision,s=a((function(){return"1"!==o.call(1,void 0)}))||!a((function(){o.call({})}));n({target:"Number",proto:!0,forced:s},{toPrecision:function(t){return void 0===t?o.call(r(this)):o.call(r(this),t)}})},6005:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=a(i("6b75"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t))return(0,n.default)(t)}},6272:function(t,e,i){"use strict";i.r(e);var n=i("8201"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},"6dbd":function(t,e,i){"use strict";function n(t){if(!document.queryCommandSupported("copy"))return!1;var e=document.createElement("textarea");e.value=t,e.readOnly="readOnly",document.body.appendChild(e),e.select(),e.setSelectionRange(0,t.length);var i=document.execCommand("copy");return e.remove(),i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},"7ec7":function(t,e,i){"use strict";i.r(e);var n=i("4892"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},8201:function(t,e,i){"use strict";(function(t){var n=i("4ea4");i("7db0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var a=n(i("1da1")),r=n(i("5530")),o=n(i("ae24")),s=n(i("3d69")),l=n(i("d0f8")),u=n(i("6dbd")),c=i("2f62"),d=i("cce2"),f=n(i("0fb6")),h=0,g=0,b=!0,v={components:{listCell:o.default},data:function(){return{coverTransform:"translateY(0px)",coverTransition:"0s",moving:!1,accountName:"请登录",accountRemain:0,isWxBind:"N",isPhoneBind:"N",headImg:"",refferUrl:"https://www.ricebuy.cn/v1/pages/public/login?referrerId=",poster:{},posterImage:"",canvasId:"default_PosterCanvasId",count:0}},onLoad:function(t){this.val=t.devicenumber},onShow:function(){this.hasLogin?this.loanUserInfo():(this.accountName="",this.accountRemain=0)},onNavigationBarButtonTap:function(t){var e=t.index;if(0===e)this.navTo("/pages/set/set",1);else if(1===e){var i=getCurrentPages(),n=i[i.length-1],a=n.$getAppWebview();a.hideTitleNViewButtonRedDot({index:e}),uni.navigateTo({url:"/pages/notice/notice"})}},computed:(0,r.default)({},(0,c.mapState)(["hasLogin","userinfo"])),methods:(0,r.default)((0,r.default)({},(0,c.mapMutations)(["login"])),{},{loanUserInfo:function(){var t=this;this.$http.get(this.$httpApi.my.account,{}).then((function(e){t.accountName=e.name,t.accountRemain=e.remain,t.headImg=e.headImg,t.isWxBind=e.isWxBind,t.isPhoneBind=e.isPhoneBind})).catch((function(t){})),t.refferUrl=t.refferUrl+t.userinfo.userId},navToLogin:function(t,e){this.hasLogin||this.navTo(t,e)},navTo:function(t,e){this.hasLogin||1===e?uni.navigateTo({url:t}):s.default.showUnloginModal()},coverTouchstart:function(t){!1!==b&&(this.coverTransition="transform .1s linear",h=t.touches[0].clientY)},coverTouchmove:function(t){g=t.touches[0].clientY;var e=g-h;e<0?this.moving=!1:(this.moving=!0,e>=80&&e<100&&(e=80),e>0&&e<=80&&(this.coverTransform="translateY(".concat(e,"px)")))},coverTouchend:function(){!1!==this.moving&&(this.moving=!1,this.coverTransition="transform 0.3s cubic-bezier(.21,1.93,.53,.64)",this.coverTransform="translateY(0px)")},bindWx:function(){if(this.hasLogin){var t=window.location.href;l.default.login(t)}else s.default.showUnloginModal()},copyWx:function(t){var e=t,i=(0,u.default)(e);!1===i?uni.showToast({title:"不支持复制"}):uni.showToast({title:"客服微信号已复制,去微信搜索,添加客服好友吧!",icon:"none",duration:4e3})},bindPhone:function(){this.hasLogin?uni.navigateTo({url:"/pages/user/phoneBind"}):s.default.showUnloginModal()},shareFc:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function i(){var n,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=e,i.prev=1,e.count++,i.next=5,(0,d.getSharePoster)({_this:n,canvasType:"2d",type:"testShareType",formData:{},posterCanvasId:n.canvasId,delayTimeScale:20,background:{height:10,width:10},setCanvasWH:function(t){var e=t.bgObj;n.poster=e},drawArray:function(t){t.bgObj,t.type,t.bgScale;var e=t.setBgObj,i=t.getBgObj;return[{type:"image",id:"productImage",url:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic3.zhimg.com%2Fv2-a678ceb86ea5b80fd57cc7fd3ec80b73_1200x500.jpg&refer=http%3A%2F%2Fpic3.zhimg.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1621837008&t=160e686dee4be52752f2a64f555c4556",dx:0,dy:0,serialNum:0,infoCallBack:function(t){var i,n;t.width>t.height?(i=t.width>700?700:t.width,n=i/t.width*t.height):(n=t.height>700?700:t.height,i=n/t.height*t.width),i<500&&(i=500,n=i/t.width*t.height);var a=.3*n;return a<150&&(a=150),a>250&&(a=250),e({width:i,height:n+a}),{dWidth:i,dHeight:n}}},{type:"text",id:"productName",text:"我是"+n.accountName,color:"#f1505c",serialNum:1,allInfoCallback:function(t){var e=t.drawArray,n=e.find((function(t){return"productImage"===t.id})),a=i().height-n.dHeight;return{size:.05*i().width,lineFeed:{maxWidth:.5*i().width,lineNum:1},dx:.05*i().width,dy:n.dHeight+.25*a}}},{type:"text",text:"我在熊猫集市淘好物",color:"#f1505c",serialNum:2,allInfoCallback:function(t){var e=t.drawArray,n=e.find((function(t){return"productImage"===t.id})),a=i().height-n.dHeight;return{size:.05*i().width,lineFeed:{maxWidth:.5*i().width,lineNum:1},dx:.05*i().width,dy:n.dHeight+.5*a}}},{type:"text",text:"快来一起省钱吧",serialNum:3,color:"#f1505c",id:"text1",allInfoCallback:function(t){var e=t.drawArray,n=e.find((function(t){return"productImage"===t.id})),a=i().height-n.dHeight;return{size:.05*i().width,lineFeed:{maxWidth:.5*i().width,lineNum:1},dx:.05*i().width,dy:n.dHeight+.75*a}}},{type:"qrcode",text:n.refferUrl,serialNum:5,allInfoCallback:function(t){var e=t.drawArray,n=e.find((function(t){return"productImage"===t.id})),a=i().height-n.dHeight,r=.4*i().width,o=a,s=r>o?o:r,l=.9*s;return{size:l,dx:i().width-.95*s,dy:i().height-.95*s}}}]}});case 5:a=i.sent,e.posterImage=a.poster.tempFilePath,e.$refs.popup.show(),i.next=15;break;case 10:i.prev=10,i.t0=i["catch"](1),f.default.hideLoading(),f.default.showToast(JSON.stringify(i.t0)),t("log",JSON.stringify(i.t0)," at pages/user/user.vue:472");case 15:case"end":return i.stop()}}),i,null,[[1,10]])})))()},saveImage:function(){uni.saveImageToPhotosAlbum({filePath:this.posterImage,success:function(t){f.default.showToast("保存成功，快去分享吧")},fail:function(t){f.default.showToast(t)}})},share:function(){uni.saveImageToPhotosAlbum({filePath:this.poster.finalPath,success:function(t){f.default.showToast("海报保存成功，快去分享吧")}})},hideQr:function(){this.$refs.popup.hide()}})};e.default=v}).call(this,i("0de9")["log"])},a11e:function(t,e,i){"use strict";function n(t){var e,i,n;return t<128?[t]:t<2048?(e=192+(t>>6),i=128+(63&t),[e,i]):(e=224+(t>>12),i=128+(t>>6&63),n=128+(63&t),[e,i,n])}function a(t){for(var e=[],i=0;i<t.length;i++)for(var a=t.charCodeAt(i),r=n(a),o=0;o<r.length;o++)e.push(r[o]);return e}function r(t,e){this.typeNumber=-1,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.rsBlocks=null,this.totalDataCount=-1,this.data=t,this.utf8bytes=a(t),this.make()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r,r.prototype={constructor:r,getModuleCount:function(){return this.moduleCount},make:function(){this.getRightType(),this.dataCache=this.createData(),this.createQrcode()},makeImpl:function(t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[e]=new Array(this.moduleCount);this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(!0,t),this.typeNumber>=7&&this.setupTypeNumber(!0),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(t,e){for(var i=-1;i<=7;i++)if(!(t+i<=-1||this.moduleCount<=t+i))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(this.modules[t+i][e+n]=0<=i&&i<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==i||6==i)||2<=i&&i<=4&&2<=n&&n<=4)},createQrcode:function(){for(var t=0,e=0,i=null,n=0;n<8;n++){this.makeImpl(n);var a=l.getLostPoint(this);(0==n||t>a)&&(t=a,e=n,i=this.modules)}this.modules=i,this.setupTypeInfo(!1,e),this.typeNumber>=7&&this.setupTypeNumber(!1)},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0,null==this.modules[6][t]&&(this.modules[6][t]=t%2==0))},setupPositionAdjustPattern:function(){for(var t=l.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var i=0;i<t.length;i++){var n=t[e],a=t[i];if(null==this.modules[n][a])for(var r=-2;r<=2;r++)for(var o=-2;o<=2;o++)this.modules[n+r][a+o]=-2==r||2==r||-2==o||2==o||0==r&&0==o}},setupTypeNumber:function(t){for(var e=l.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++){var n=!t&&1==(e>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=n,this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=n}},setupTypeInfo:function(t,e){for(var i=o[this.errorCorrectLevel]<<3|e,n=l.getBCHTypeInfo(i),a=0;a<15;a++){var r=!t&&1==(n>>a&1);a<6?this.modules[a][8]=r:a<8?this.modules[a+1][8]=r:this.modules[this.moduleCount-15+a][8]=r;r=!t&&1==(n>>a&1);a<8?this.modules[8][this.moduleCount-a-1]=r:a<9?this.modules[8][15-a-1+1]=r:this.modules[8][15-a-1]=r}this.modules[this.moduleCount-8][8]=!t},createData:function(){var t=new h,e=this.typeNumber>9?16:8;t.put(4,4),t.put(this.utf8bytes.length,e);for(var i=0,n=this.utf8bytes.length;i<n;i++)t.put(this.utf8bytes[i],8);t.length+4<=8*this.totalDataCount&&t.put(0,4);while(t.length%8!=0)t.putBit(!1);while(1){if(t.length>=8*this.totalDataCount)break;if(t.put(r.PAD0,8),t.length>=8*this.totalDataCount)break;t.put(r.PAD1,8)}return this.createBytes(t)},createBytes:function(t){for(var e=0,i=0,n=0,a=this.rsBlock.length/3,r=new Array,o=0;o<a;o++)for(var s=this.rsBlock[3*o+0],u=this.rsBlock[3*o+1],c=this.rsBlock[3*o+2],f=0;f<s;f++)r.push([c,u]);for(var h=new Array(r.length),g=new Array(r.length),b=0;b<r.length;b++){var v=r[b][0],m=r[b][1]-v;i=Math.max(i,v),n=Math.max(n,m),h[b]=new Array(v);for(o=0;o<h[b].length;o++)h[b][o]=255&t.buffer[o+e];e+=v;var p=l.getErrorCorrectPolynomial(m),w=new d(h[b],p.getLength()-1),y=w.mod(p);g[b]=new Array(p.getLength()-1);for(o=0;o<g[b].length;o++){var x=o+y.getLength()-g[b].length;g[b][o]=x>=0?y.get(x):0}}var k=new Array(this.totalDataCount),T=0;for(o=0;o<i;o++)for(b=0;b<r.length;b++)o<h[b].length&&(k[T++]=h[b][o]);for(o=0;o<n;o++)for(b=0;b<r.length;b++)o<g[b].length&&(k[T++]=g[b][o]);return k},mapData:function(t,e){for(var i=-1,n=this.moduleCount-1,a=7,r=0,o=this.moduleCount-1;o>0;o-=2){6==o&&o--;while(1){for(var s=0;s<2;s++)if(null==this.modules[n][o-s]){var u=!1;r<t.length&&(u=1==(t[r]>>>a&1));var c=l.getMask(e,n,o-s);c&&(u=!u),this.modules[n][o-s]=u,a--,-1==a&&(r++,a=7)}if(n+=i,n<0||this.moduleCount<=n){n-=i,i=-i;break}}}}},r.PAD0=236,r.PAD1=17;for(var o=[1,0,3,2],s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},l={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){var e=t<<10;while(l.getBCHDigit(e)-l.getBCHDigit(l.G15)>=0)e^=l.G15<<l.getBCHDigit(e)-l.getBCHDigit(l.G15);return(t<<10|e)^l.G15_MASK},getBCHTypeNumber:function(t){var e=t<<12;while(l.getBCHDigit(e)-l.getBCHDigit(l.G18)>=0)e^=l.G18<<l.getBCHDigit(e)-l.getBCHDigit(l.G18);return t<<12|e},getBCHDigit:function(t){var e=0;while(0!=t)e++,t>>>=1;return e},getPatternPosition:function(t){return l.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,i){switch(t){case s.PATTERN000:return(e+i)%2==0;case s.PATTERN001:return e%2==0;case s.PATTERN010:return i%3==0;case s.PATTERN011:return(e+i)%3==0;case s.PATTERN100:return(Math.floor(e/2)+Math.floor(i/3))%2==0;case s.PATTERN101:return e*i%2+e*i%3==0;case s.PATTERN110:return(e*i%2+e*i%3)%2==0;case s.PATTERN111:return(e*i%3+(e+i)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new d([1],0),i=0;i<t;i++)e=e.multiply(new d([1,u.gexp(i)],0));return e},getLostPoint:function(t){for(var e=t.getModuleCount(),i=0,n=0,a=0;a<e;a++)for(var r=0,o=t.modules[a][0],s=0;s<e;s++){var l=t.modules[a][s];if(s<e-6&&l&&!t.modules[a][s+1]&&t.modules[a][s+2]&&t.modules[a][s+3]&&t.modules[a][s+4]&&!t.modules[a][s+5]&&t.modules[a][s+6]&&(s<e-10?t.modules[a][s+7]&&t.modules[a][s+8]&&t.modules[a][s+9]&&t.modules[a][s+10]&&(i+=40):s>3&&t.modules[a][s-1]&&t.modules[a][s-2]&&t.modules[a][s-3]&&t.modules[a][s-4]&&(i+=40)),a<e-1&&s<e-1){var u=0;l&&u++,t.modules[a+1][s]&&u++,t.modules[a][s+1]&&u++,t.modules[a+1][s+1]&&u++,0!=u&&4!=u||(i+=3)}o^l?r++:(o=l,r>=5&&(i+=3+r-5),r=1),l&&n++}for(s=0;s<e;s++)for(r=0,o=t.modules[0][s],a=0;a<e;a++){l=t.modules[a][s];a<e-6&&l&&!t.modules[a+1][s]&&t.modules[a+2][s]&&t.modules[a+3][s]&&t.modules[a+4][s]&&!t.modules[a+5][s]&&t.modules[a+6][s]&&(a<e-10?t.modules[a+7][s]&&t.modules[a+8][s]&&t.modules[a+9][s]&&t.modules[a+10][s]&&(i+=40):a>3&&t.modules[a-1][s]&&t.modules[a-2][s]&&t.modules[a-3][s]&&t.modules[a-4][s]&&(i+=40)),o^l?r++:(o=l,r>=5&&(i+=3+r-5),r=1)}var c=Math.abs(100*n/e/e-50)/5;return i+=10*c,i}},u={glog:function(t){if(t<1)throw new Error("glog("+t+")");return u.LOG_TABLE[t]},gexp:function(t){while(t<0)t+=255;while(t>=256)t-=255;return u.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},c=0;c<8;c++)u.EXP_TABLE[c]=1<<c;for(c=8;c<256;c++)u.EXP_TABLE[c]=u.EXP_TABLE[c-4]^u.EXP_TABLE[c-5]^u.EXP_TABLE[c-6]^u.EXP_TABLE[c-8];for(c=0;c<255;c++)u.LOG_TABLE[u.EXP_TABLE[c]]=c;function d(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);var i=0;while(i<t.length&&0==t[i])i++;this.num=new Array(t.length-i+e);for(var n=0;n<t.length-i;n++)this.num[n]=t[n+i]}d.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var n=0;n<t.getLength();n++)e[i+n]^=u.gexp(u.glog(this.get(i))+u.glog(t.get(n)));return new d(e,0)},mod:function(t){var e=this.getLength(),i=t.getLength();if(e-i<0)return this;for(var n=new Array(e),a=0;a<e;a++)n[a]=this.get(a);while(n.length>=i){var r=u.glog(n[0])-u.glog(t.get(0));for(a=0;a<t.getLength();a++)n[a]^=u.gexp(u.glog(t.get(a))+r);while(0==n[0])n.shift()}return new d(n,0)}};var f=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];function h(){this.buffer=new Array,this.length=0}r.prototype.getRightType=function(){for(var t=1;t<41;t++){var e=f[4*(t-1)+this.errorCorrectLevel];if(void 0==e)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+this.errorCorrectLevel);for(var i=e.length/3,n=0,a=0;a<i;a++){var r=e[3*a+0],o=e[3*a+2];n+=o*r}var s=t>9?2:1;if(this.utf8bytes.length+s<n||40==t){this.typeNumber=t,this.rsBlock=e,this.totalDataCount=n;break}}},h.prototype={get:function(t){var e=Math.floor(t/8);return this.buffer[e]>>>7-t%8&1},put:function(t,e){for(var i=0;i<e;i++)this.putBit(t>>>e-i-1&1)},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}}},adb6:function(t,e,i){"use strict";var n=i("4403"),a=i.n(n);a.a},ae24:function(t,e,i){"use strict";i.r(e);var n=i("be5b"),a=i("7ec7");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("adb6");var o,s=i("f0c5"),l=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"4a25f54b",null,!1,n["a"],o);e["default"]=l.exports},b354:function(t,e,i){"use strict";function n(t){if(0===t.indexOf("_www")||0===t.indexOf("_doc")||0===t.indexOf("_documents")||0===t.indexOf("_downloads"))return t;if(0===t.indexOf("file://"))return t;if(0===t.indexOf("/storage/emulated/0/"))return t;if(0===t.indexOf("/")){var e=plus.io.convertAbsoluteFileSystem(t);if(e!==t)return e;t=t.substr(1)}return"_www/"+t}function a(t){return new Promise((function(e,i){if("object"===typeof window&&"document"in window){if("function"===typeof FileReader){var a=new XMLHttpRequest;return a.open("GET",t,!0),a.responseType="blob",a.onload=function(){if(200===this.status){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=i,t.readAsDataURL(this.response)}},a.onerror=i,void a.send()}var r=document.createElement("canvas"),o=r.getContext("2d"),s=new Image;return s.onload=function(){r.width=s.width,r.height=s.height,o.drawImage(s,0,0),e(r.toDataURL()),r.height=r.width=0},s.onerror=i,void(s.src=t)}"object"!==typeof plus?"object"===typeof wx&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:t,encoding:"base64",success:function(t){e("data:image/png;base64,"+t.data)},fail:function(t){i(t)}}):i(new Error("not support")):plus.io.resolveLocalFileSystemURL(n(t),(function(t){t.file((function(t){var n=new plus.io.FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){i(t)},n.readAsDataURL(t)}),(function(t){i(t)}))}),(function(t){i(t)}))}))}function r(t){return new Promise((function(e,i){if("object"===typeof window&&"document"in window){t=t.split(",");var n=t[0].match(/:(.*?);/)[1],a=atob(t[1]),r=a.length,o=new Uint8Array(r);while(r--)o[r]=a.charCodeAt(r);return e((window.URL||window.webkitURL).createObjectURL(new Blob([o],{type:n})))}var s=t.match(/data\:\S+\/(\S+);/);s?s=s[1]:i(new Error("base64 error"));var l=Date.now()+"."+s;if("object"!==typeof plus)if("object"===typeof wx&&wx.canIUse("getFileSystemManager")){var u=wx.env.USER_DATA_PATH+"/"+l;wx.getFileSystemManager().writeFile({filePath:u,data:t.replace(/^data:\S+\/\S+;base64,/,""),encoding:"base64",success:function(){e(u)},fail:function(t){i(t)}})}else i(new Error("not support"));else{var c=new plus.nativeObj.Bitmap("bitmap"+Date.now());c.loadBase64Data(t,(function(){var t="_doc/uniapp_temp/"+l;c.save(t,{},(function(){c.clear(),e(t)}),(function(t){c.clear(),i(t)}))}),(function(t){c.clear(),i(t)}))}}))}i("c975"),i("ace4"),i("d3b7"),i("ac1f"),i("3ca3"),i("466d"),i("5319"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("ddb0"),i("2b3d"),Object.defineProperty(e,"__esModule",{value:!0}),e.pathToBase64=a,e.base64ToPath=r},be5b:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"mix-list-cell",class:t.border,attrs:{"hover-class":"cell-hover","hover-stay-time":50},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.eventClick.apply(void 0,arguments)}}},[t.icon?i("v-uni-text",{staticClass:"cell-icon yticon",class:t.icon,style:[{color:t.iconColor}]}):t._e(),i("v-uni-text",{staticClass:"cell-tit clamp"},[t._v(t._s(t.title))]),t.tips?i("v-uni-text",{staticClass:"cell-tip"},[t._v(t._s(t.tips))]):t._e(),i("v-uni-text",{staticClass:"cell-more yticon",class:t.typeList[t.navigateType]})],1)],1)},r=[]},cb29:function(t,e,i){var n=i("23e7"),a=i("81d5"),r=i("44d2");n({target:"Array",proto:!0},{fill:a}),r("fill")},cce2:function(t,e,i){"use strict";var n=i("4ea4");i("99af"),i("cb29"),i("c740"),i("4160"),i("a15b"),i("4e82"),i("a434"),i("a9e3"),i("b680"),i("542d"),i("d3b7"),i("ac1f"),i("3ca3"),i("1276"),i("498a"),i("159b"),i("ddb0");var a=n(i("2909")),r=n(i("5530"));i("96cf");var o=n(i("1da1")),s=n(i("0fb6")),l=n(i("a11e")),u=i("b354"),c="QSSHAREPOSTER_IDKEY",d=1;function f(t){var e=t.type,i=t.formData,n=t.background,l=t.posterCanvasId,u=t.backgroundImage,f=t.reserve,g=t.textArray,b=t.drawArray,v=t.qrCodeArray,m=t.imagesArray,w=t.setCanvasWH,k=t.setCanvasToTempFilePath,P=t.canvas2image,N=t.setDraw,C=t.bgScale,S=t.Context,I=t._this,A=t.delayTimeScale,_=t.drawDelayTime,F=t.draw;return new Promise(function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(o,L){var O,E,z,j,B,M,W,D,H,J,U,G;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,s.default.showLoading("正在准备海报数据"),S||(s.default.log("没有画布对象,创建画布对象"),S=uni.createCanvasContext(l,I||null)),!(n&&n.width&&n.height)){t.next=7;break}O=n,t.next=10;break;case 7:return t.next=9,R({backgroundImage:u,type:e,formData:i});case 9:O=t.sent;case 10:if(C=C||d,O.width=O.width*C,O.height=O.height*C,s.default.log("获取背景图信息对象成功:"+JSON.stringify(O)),E={bgObj:O,type:e,bgScale:C,getBgObj:function(){return E.bgObj},setBgObj:function(t){var e=(0,r.default)((0,r.default)({},E.bgObj),t);E.bgObj=e,O=e}},!m){t.next=23;break}return"function"==typeof m&&(m=m(E)),s.default.showLoading("正在生成需绘制图片的临时路径"),s.default.log("准备设置图片"),t.next=21,T(m);case 21:m=t.sent,s.default.hideLoading();case 23:if(g&&("function"==typeof g&&(g=g(E)),g=p(S,g)),!v){t.next=38;break}"function"==typeof v&&(v=v(E)),s.default.showLoading("正在生成需绘制图片的临时路径"),z=0;case 28:if(!(z<v.length)){t.next=37;break}if(s.default.log(z),!v[z].image){t.next=34;break}return t.next=33,s.default.downloadFile_PromiseFc(v[z].image);case 33:v[z].image=t.sent;case 34:z++,t.next=28;break;case 37:s.default.hideLoading();case 38:if(!b){t.next=96;break}if("function"==typeof b&&(b=b(E)),!s.default.isPromise(b)){t.next=44;break}return t.next=43,b;case 43:b=t.sent;case 44:if(!(s.default.isArray(b)&&b.length>0)){t.next=96;break}[],j=0;case 47:if(!(j<b.length)){t.next=79;break}B=b[j],B[c]=j,M=void 0,W=!1,t.t0=B.type,t.next="image"===t.t0?55:"text"===t.t0?59:"qrcode"===t.t0?61:"custom"===t.t0?67:"fillrect"===t.t0?68:"strokeRect"===t.t0?69:"roundStrokeRect"===t.t0?70:"roundFillRect"===t.t0?71:72;break;case 55:return t.next=57,T(B);case 57:return M=t.sent,t.abrupt("break",74);case 59:return M=p(S,B,E.bgObj),t.abrupt("break",74);case 61:if(!B.image){t.next=66;break}return t.next=64,s.default.downloadFile_PromiseFc(B.image);case 64:t.t1=t.sent,M={image:t.t1};case 66:return t.abrupt("break",74);case 67:return t.abrupt("break",74);case 68:return t.abrupt("break",74);case 69:return t.abrupt("break",74);case 70:return t.abrupt("break",74);case 71:return t.abrupt("break",74);case 72:return s.default.log("未识别的类型"),t.abrupt("break",74);case 74:!W&&M&&s.default.isObject(M)&&(b[j]=(0,r.default)((0,r.default)({},B),M));case 76:j++,t.next=47;break;case 79:s.default.log("AllInfoCallback之前",JSON.stringify(b)),s.default.log("----------------hasAllInfoCallback----------------"),D=(0,a.default)(b),D.sort((function(t,e){var i=s.default.isUndef(t.serialNum)||s.default.isNull(t.serialNum)?Number.NEGATIVE_INFINITY:Number(t.serialNum),n=s.default.isUndef(e.serialNum)||s.default.isNull(e.serialNum)?Number.NEGATIVE_INFINITY:Number(e.serialNum);return i-n})),s.default.log("开始for循环"),H=regeneratorRuntime.mark((function t(e){var i,n,o,l,u,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=(0,r.default)({},D[e]),n=i[c],s.default.log("item_idKey",n),o=b.findIndex((function(t){return t[c]==n})),s.default.log("ind",o),-1!=o){t.next=7;break}return t.abrupt("return","break");case 7:if(!s.default.isFn(i.allInfoCallback)){t.next=16;break}if(l=i.allInfoCallback({drawArray:b}),s.default.log("newData",JSON.stringify(l)),!s.default.isPromise(l)){t.next=14;break}return t.next=13,l;case 13:l=t.sent;case 14:"text"===b[o].type&&l.size&&(u=x(S,{text:l.text||b[o].text,size:l.size}),l.textLength=u),b[o]=(0,r.default)((0,r.default)({},i),l);case 16:s.default.log("drawArray[ind]",JSON.stringify(b[o])),"text"===b[o].type&&(d=y(S,b[o],E.bgObj),s.default.isArray(d)?(d.forEach((function(t,e){t[c]=b.length+e,t.allInfoCallback=null})),(f=b).splice.apply(f,[o,1].concat((0,a.default)(d)))):b.splice(o,1,d));case 18:case"end":return t.stop()}}),t)})),J=0;case 86:if(!(J<D.length)){t.next=94;break}return t.delegateYield(H(J),"t2",88);case 88:if(U=t.t2,"break"!==U){t.next=91;break}return t.abrupt("break",94);case 91:J++,t.next=86;break;case 94:s.default.log("for循环结束"),s.default.log("allInfocallback结束",JSON.stringify(b));case 96:if(b.sort((function(t,e){var i=s.default.isUndef(t.zIndex)||s.default.isNull(t.zIndex)?Number.NEGATIVE_INFINITY:Number(t.zIndex),n=s.default.isUndef(e.zIndex)||s.default.isNull(e.zIndex)?Number.NEGATIVE_INFINITY:Number(e.zIndex);return i-n})),s.default.log("params:"+JSON.stringify(E)),!w||"function"!=typeof w){t.next=101;break}return t.next=101,new Promise((function(t,e){w(E),setTimeout((function(){t()}),50)}));case 101:return t.next=103,h({Context:S,type:e,posterCanvasId:l,reserve:f,drawArray:b,textArray:g,imagesArray:m,bgObj:O,qrCodeArray:v,setCanvasToTempFilePath:k,setDraw:N,bgScale:C,_this:I,delayTimeScale:A,drawDelayTime:_,canvas2image:P,draw:F});case 103:G=t.sent,s.default.hideLoading(),o({bgObj:O,poster:G,type:e}),t.next=111;break;case 108:t.prev=108,t.t3=t["catch"](0),L(t.t3);case 111:case"end":return t.stop()}}),t,null,[[0,108]])})));return function(e,i){return t.apply(this,arguments)}}())}function h(t){var e=t.Context,i=t.type,n=t.posterCanvasId,a=t.reserve,o=t.bgObj,l=t.drawArray,u=t.textArray,c=t.qrCodeArray,d=t.imagesArray,f=t.setCanvasToTempFilePath,h=t.setDraw,p=t.bgScale,w=t._this,y=t.delayTimeScale,x=t.drawDelayTime,k=t.canvas2image,T=t.draw,P={Context:e,bgObj:o,type:i,bgScale:p};return y=void 0!==y?y:15,x=void 0!==x?x:100,new Promise((function(t,p){try{if(s.default.showLoading("正在绘制海报"),s.default.log("背景对象:"+JSON.stringify(o)),o&&o.path?(s.default.log("背景有图片路径"),e.drawImage(o.path,0,0,o.width,o.height)):(s.default.log("背景没有图片路径"),o.backgroundColor?(s.default.log("背景有背景颜色:"+o.backgroundColor),e.setFillStyle(o.backgroundColor),e.fillRect(0,0,o.width,o.height)):s.default.log("背景没有背景颜色")),s.default.showLoading("绘制图片"),d&&d.length>0&&_(e,d),s.default.showLoading("绘制自定义内容"),h&&"function"==typeof h&&h(P),s.default.showLoading("绘制文本"),u&&u.length>0&&C(e,u,o),s.default.showLoading("绘制二维码"),c&&c.length>0)for(var N=0;N<c.length;N++)j(e,c[N]);if(s.default.showLoading("绘制可控层级序列"),l&&l.length>0)for(var S=0;S<l.length;S++){var I=l[S];switch(s.default.log("绘制可控层级序列, drawArrayItem:"+JSON.stringify(I)),I.type){case"image":s.default.log("绘制可控层级序列, 绘制图片"),_(e,I);break;case"text":s.default.log("绘制可控层级序列, 绘制文本"),C(e,I,o);break;case"qrcode":s.default.log("绘制可控层级序列, 绘制二维码"),j(e,I);break;case"custom":s.default.log("绘制可控层级序列, 绘制自定义内容"),I.setDraw&&"function"===typeof I.setDraw&&I.setDraw(e);break;case"fillRect":s.default.log("绘制可控层级序列, 绘制填充直角矩形"),g(e,I);break;case"strokeRect":s.default.log("绘制可控层级序列, 绘制线条直角矩形"),b(e,I);break;case"roundStrokeRect":s.default.log("绘制可控层级序列, 绘制线条圆角矩形"),v(e,I);break;case"roundFillRect":s.default.log("绘制可控层级序列, 绘制填充圆角矩形"),m(e,I);break;default:s.default.log("未识别的类型");break}}s.default.showLoading("绘制中"),setTimeout((function(){if(s.default.log("准备执行draw方法"),s.default.log("Context:"+e),!1===T)return s.default.log("draw属性为false，请自行调用canvas实例的draw方法"),void t();var h=function(){var e,a=f||{};a&&"function"==typeof a&&(a=f(o,i));uni.getSystemInfoSync().pixelRatio;var h=(0,r.default)((0,r.default)({quality:.8,fileType:"jpg"},a),{},{canvasId:n});if(!1===k)return s.default.hideLoading(),t({setCanvasToTempFilePath:h});s.default.showLoading("正在输出图片"),s.default.log("canvasToTempFilePath的data对象:"+JSON.stringify(h)),e=function(){var e=(0,r.default)((0,r.default)({},h),{},{success:function(e){s.default.hideLoading(),t((0,r.default)((0,r.default)({},e),{},{setCanvasToTempFilePath:h}))},fail:function(t){s.default.hideLoading(),s.default.log("输出图片失败"),s.default.log("输出图片失败:"+JSON.stringify(t)),p("输出图片失败:"+JSON.stringify(t))}});uni.canvasToTempFilePath(e,w||null)};var g=0;c&&c.forEach((function(t){t.text&&(g+=Number(t.text.length))})),d&&d.forEach((function(){g+=y})),u&&u.forEach((function(){g+=y})),l&&l.forEach((function(t){switch(t.type){case"text":t.text&&(g+=t.text.length);break;case"qrcode":t.text&&(g+=2*t.text.length);break;default:g+=y;break}})),s.default.log("延时系数:"+y),s.default.log("总计延时:"+g),setTimeout(e,g)};e.draw("boolean"==typeof a&&a,h)}),x)}catch(A){s.default.hideLoading(),p(A)}}))}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.default.log("进入绘制填充直角矩形方法, drawArrayItem:"+JSON.stringify(e)),t.setFillStyle(e.backgroundColor||"black"),t.setGlobalAlpha(e.alpha||1),t.fillRect(e.dx||0,e.dy||0,e.width||0,e.height||0),t.setGlobalAlpha(1)}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.setStrokeStyle(e.color||"black"),t.setLineWidth(e.lineWidth||1),t.strokeRect(e.dx,e.dy,e.width,e.height)}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.dx,n=e.dy,a=e.width,r=e.height,o=e.r,s=e.lineWidth,l=e.color;o=o||.1*a,a<2*o&&(o=a/2),a<2*o&&(o=a/2),t.beginPath(),t.arc(i+o,n+o,o,1*Math.PI,1.5*Math.PI),t.lineTo(i+a-o,n),t.arc(i+a-o,n+o,o,1.5*Math.PI,0),t.lineTo(i+a,n+r-o),t.arc(i+a-o,n+r-o,o,0,.5*Math.PI),t.lineTo(i+o,n+r),t.arc(i+o,n+r-o,o,.5*Math.PI,1*Math.PI),t.lineTo(i,n+o),t.closePath(),t.setLineWidth(s||1),t.setStrokeStyle(l||"black"),t.stroke()}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.dx,n=e.dy,a=e.width,r=e.height,o=e.r,s=e.backgroundColor;o=o||.1*a,a<2*o&&(o=a/2),a<2*o&&(o=a/2),t.beginPath(),t.arc(i+o,n+o,o,1*Math.PI,1.5*Math.PI),t.lineTo(i+a-o,n),t.arc(i+a-o,n+o,o,1.5*Math.PI,0),t.lineTo(i+a,n+r-o),t.arc(i+a-o,n+r-o,o,0,.5*Math.PI),t.lineTo(i+o,n+r),t.arc(i+o,n+r-o,o,.5*Math.PI,1*Math.PI),t.lineTo(i,n+o),t.closePath(),t.setFillStyle(s),t.fill()}function p(t,e,i){if(s.default.log("进入设置文字方法, texts:"+JSON.stringify(e)),!e||!s.default.isArray(e))return s.default.log("texts是对象"),e=w(t,e,i),s.default.log("返回texts:"+JSON.stringify(e)),e;if(s.default.log("texts是数组"),e.length>0)for(var n=0;n<e.length;n++)s.default.log("字符串信息-初始化之前:"+JSON.stringify(e[n])),e[n]=w(t,e[n],i)}function w(t,e,i){if(s.default.log("进入设置文字方法, textItem:"+JSON.stringify(e)),s.default.isNotNull_string(e.text)){e.text=String(e.text),e.alpha=void 0!==e.alpha?Number(e.alpha):1,e.color=e.color||"black",e.size=void 0!==e.size?Number(e.size):10,e.textAlign=e.textAlign||"left",e.textBaseline=e.textBaseline||"middle",e.dx=Number(e.dx)||0,e.dy=Number(e.dy)||0,e.size=Math.ceil(Number(e.size)),s.default.log("字符串信息-初始化默认值后:"+JSON.stringify(e));var n=x(t,{text:e.text,size:e.size});s.default.log("字符串信息-初始化时的文本长度:"+n);var a={};e.infoCallBack&&"function"===typeof e.infoCallBack&&(a=e.infoCallBack(n)),a.size&&(n=x(t,{text:e.text,size:e.size})),e=(0,r.default)((0,r.default)((0,r.default)({},e),a),{},{textLength:n}),s.default.log("字符串信息-infoCallBack后:"+JSON.stringify(e))}return e}function y(t,e,i){if(e.text&&e.lineFeed){s.default.log("设置换行");var n=-1,a=i.width,o=e.size,l=e.dx;if(s.default.isObject(e.lineFeed)){var u=e.lineFeed;n=void 0!==u.lineNum&&"number"===typeof u.lineNum&&u.lineNum>=0?u.lineNum:n,a=void 0!==u.maxWidth&&"number"===typeof u.maxWidth?u.maxWidth:a,o=void 0!==u.lineHeight&&"number"===typeof u.lineHeight?u.lineHeight:o,l=void 0!==u.dx&&"number"===typeof u.dx?u.dx:l}s.default.lineFeedTags.forEach((function(t){e.text=e.text.split(t).join(s.default.tagetLineFeedTag)}));for(var c=e.text.split(""),d="",f=[],h=0,g=c.length;h<g;h++)c[h]!==s.default.tagetLineFeedTag?x(t,{text:d,size:e.size})<=a&&x(t,{text:d+c[h],size:e.size})<=a?(d+=c[h],h==c.length-1&&f.push(d)):(f.push(d),d=c[h],h==c.length-1&&f.push(c[h])):(f.push(d),d=c[++h]);s.default.log("循环出的文本数组:"+JSON.stringify(f));for(var b=n>=0&&n<f.length?n:f.length,v=[],m=0;m<b;m++){var p=f[m];m==b-1&&b<f.length&&f.length>1&&x(t,{text:p,size:e.size})>.9*(a-e.size)&&(p=p.substring(0,p.length-1)+"...");var w=(0,r.default)((0,r.default)({},e),{},{text:p,dx:0===m?e.dx:l>=0?l:e.dx,dy:e.dy+m*o,textLength:x(t,{text:p,size:e.size})});s.default.log("重新组成的文本对象:"+JSON.stringify(w)),v.push(w)}s.default.log("newArr: -----",JSON.stringify(v));var y=v.length>1?v:v[0];return y}return e}function x(t,e){s.default.log("计算文字长度, obj:"+JSON.stringify(e));var i,n=e.text,a=e.size;t.setFontSize(a);try{i=t.measureText(n)}catch(c){i={}}if(s.default.log("measureText计算文字长度, textLength:"+JSON.stringify(i)),i=i&&i.width?i.width:0,!i){for(var r=0,o=0;o<n.length;o++){var l=n.substr(o,1),u=k(l);s.default.log("计算文字宽度系数:"+u),r+=u}s.default.log("文字宽度总系数:"+r),i=r*a}return i}function k(t){var e;return e=/a/.test(t)?.552734375:/b/.test(t)?.638671875:/c/.test(t)?.50146484375:/d/.test(t)?.6396484375:/e/.test(t)?.5673828125:/f/.test(t)?.3466796875:/g/.test(t)?.6396484375:/h/.test(t)?.61572265625:/i/.test(t)?.26611328125:/j/.test(t)?.26708984375:/k/.test(t)?.54443359375:/l/.test(t)?.26611328125:/m/.test(t)?.93701171875:/n/.test(t)?.6162109375:/o/.test(t)?.6357421875:/p/.test(t)?.638671875:/q/.test(t)?.6396484375:/r/.test(t)?.3818359375:/s/.test(t)?.462890625:/t/.test(t)?.37255859375:/u/.test(t)?.6162109375:/v/.test(t)?.52490234375:/w/.test(t)?.78955078125:/x/.test(t)?.5068359375:/y/.test(t)?.529296875:/z/.test(t)?.49169921875:/A/.test(t)?.70361328125:/B/.test(t)?.62744140625:/C/.test(t)?.6689453125:/D/.test(t)?.76171875:/E/.test(t)?.5498046875:/F/.test(t)?.53125:/G/.test(t)?.74365234375:/H/.test(t)?.7734375:/I/.test(t)?.2939453125:/J/.test(t)?.39599609375:/K/.test(t)?.634765625:/L/.test(t)?.51318359375:/M/.test(t)?.97705078125:/N/.test(t)?.81298828125:/O/.test(t)?.81494140625:/P/.test(t)?.61181640625:/Q/.test(t)?.81494140625:/R/.test(t)?.65283203125:/S/.test(t)?.5771484375:/T/.test(t)?.5732421875:/U/.test(t)?.74658203125:/V/.test(t)?.67626953125:/W/.test(t)?1.017578125:/X/.test(t)?.64501953125:/Y/.test(t)?.603515625:/Z/.test(t)?.6201171875:/[0-9]/.test(t)?.58642578125:/[\u4e00-\u9fa5]/.test(t)?1:/ /.test(t)?.2958984375:/\`/.test(t)?.294921875:/\~/.test(t)?.74169921875:/\!/.test(t)?.3125:/\@/.test(t)?1.03125:/\#/.test(t)?.63818359375:/\$/.test(t)?.58642578125:/\%/.test(t)?.8896484375:/\^/.test(t)?.74169921875:/\&/.test(t)?.8701171875:/\*/.test(t)?.455078125:/\(/.test(t)||/\)/.test(t)?.333984375:/\_/.test(t)?.4482421875:/\-/.test(t)?.4326171875:/\+/.test(t)||/\=/.test(t)?.74169921875:/\|/.test(t)?.26904296875:/\\/.test(t)?.416015625:/\[/.test(t)||/\]/.test(t)?.333984375:/\;/.test(t)?.24072265625:/\'/.test(t)?.25634765625:/\,/.test(t)||/\./.test(t)?.24072265625:/\//.test(t)?.42724609375:/\{/.test(t)||/\}/.test(t)?.333984375:/\:/.test(t)?.24072265625:/\"/.test(t)?.435546875:/\</.test(t)||/\>/.test(t)?.74169921875:/\?/.test(t)?.48291015625:1,e}function T(t){return s.default.log("进入设置图片数据方法"),new Promise(function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(i,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t||!s.default.isArray(t)){e.next=14;break}s.default.log("images是一个数组"),a=0;case 4:if(!(a<t.length)){e.next=12;break}return s.default.log("设置图片数据循环中:"+a),e.next=8,N(t[a]);case 8:t[a]=e.sent;case 9:a++,e.next=4;break;case 12:e.next=18;break;case 14:return s.default.log("images是一个对象"),e.next=17,N(t);case 17:t=e.sent;case 18:i(t),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](0),n(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,i){return e.apply(this,arguments)}}())}function P(t){var e=/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*?)\s*$/i;return e.test(t)?(0,u.base64ToPath)(t):Promise.resolve(t)}function N(t){return new Promise(function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(i,n){var a,o,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.url){e.next=21;break}return e.next=3,P(t.url);case 3:return t.url=e.sent,a=t.url,o=a,e.next=8,s.default.downloadFile_PromiseFc(a);case 8:return a=e.sent,t.url=a,l=t.infoCallBack&&"function"===typeof t.infoCallBack,u={},e.next=14,s.default.getImageInfo_PromiseFc(o);case 14:u=e.sent,l&&(t=(0,r.default)((0,r.default)({},t),t.infoCallBack(u))),t.dx=Number(t.dx)||0,t.dy=Number(t.dy)||0,t.dWidth=Number(t.dWidth||u.width),t.dHeight=Number(t.dHeight||u.height),t=(0,r.default)((0,r.default)({},t),{},{imageInfo:u});case 21:i(t);case 22:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}())}function C(t,e,i){s.default.isArray(e)?s.default.log("遍历文本方法, 是数组"):(s.default.log("遍历文本方法, 不是数组"),e=[e]),s.default.log("遍历文本方法, textArray:"+JSON.stringify(e));var n=e;s.default.log("绘制文本新数组:"+JSON.stringify(n)),I(t,n)}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.font&&"string"===typeof t.font)return s.default.log(t.font),t.font;var e="normal",i="normal",n="normal",a=t.size||10,r="sans-serif";return a=Math.ceil(Number(a)),t.fontStyle&&"string"===typeof t.fontStyle&&(e=t.fontStyle.trim()),t.fontVariant&&"string"===typeof t.fontVariant&&(i=t.fontVariant.trim()),!t.fontWeight||"string"!==typeof t.fontWeight&&"number"!==typeof t.fontWeight||(n=t.fontWeight.trim()),t.fontFamily&&"string"===typeof t.fontFamily&&(r=t.fontFamily.trim()),e+" "+i+" "+n+" "+a+"px "+r}function I(t,e){if(s.default.log("准备绘制文本方法, texts:"+JSON.stringify(e)),e&&s.default.isArray(e)){if(s.default.log("准备绘制文本方法, 是数组"),e.length>0)for(var i=0;i<e.length;i++)A(t,e[i])}else s.default.log("准备绘制文本方法, 不是数组"),A(t,e)}function A(t,e){if(s.default.log("进入绘制文本方法, textItem:"+JSON.stringify(e)),e&&s.default.isObject(e)&&e.text){if(t.font=S(e),t.setFillStyle(e.color),t.setGlobalAlpha(e.alpha),t.setTextAlign(e.textAlign),t.setTextBaseline(e.textBaseline),t.fillText(e.text,e.dx,e.dy),e.lineThrough&&s.default.isObject(e.lineThrough)){s.default.log("有删除线");var i,n,a=e.lineThrough;switch(a.alpha=void 0!==a.alpha?a.alpha:e.alpha,a.style=a.style||e.color,a.width=void 0!==a.width?a.width:e.size/10,a.cap=void 0!==a.cap?a.cap:"butt",s.default.log("删除线对象:"+JSON.stringify(a)),t.setGlobalAlpha(a.alpha),t.setStrokeStyle(a.style),t.setLineWidth(a.width),t.setLineCap(a.cap),e.textAlign){case"left":i=e.dx;break;case"center":i=e.dx-e.textLength/2;break;default:i=e.dx-e.textLength;break}switch(e.textBaseline){case"top":n=e.dy+.5*e.size;break;case"middle":n=e.dy;break;default:n=e.dy-.5*e.size;break}t.beginPath(),t.moveTo(i,n),t.lineTo(i+e.textLength,n),t.stroke(),t.closePath(),s.default.log("删除线完毕")}t.setGlobalAlpha(1),t.font="10px sans-serif"}}function _(t,e){if(s.default.log("判断图片数据类型:"+JSON.stringify(e)),e&&s.default.isArray(e)){if(e.length>0)for(var i=0;i<e.length;i++)F(t,e[i])}else F(t,e)}function F(t,e){s.default.log("判断绘制图片形状, img:"+JSON.stringify(e)),e.url&&(e.circleSet?E(t,e):e.roundRectSet?z(t,e):O(t,e))}var L={scaleToFill:function(t,e){s.default.log("准备绘制mode为scaleToFill的图片"),t.drawImage(e.url,Number(e.dx||0),Number(e.dy||0),Number(e.dWidth)||!1,Number(e.dHeight)||!1),s.default.log("mode为scaleToFill的图片绘制完毕")},aspectFit:function(t,e){s.default.log("准备绘制mode为aspectFit的图片");var i=e.imageInfo,n=e.dWidth,a=e.dHeight,r=i.height,o=i.width,l=n,u=r/o*l;if(u<a){var c=(Number(a)-Number(u))/Number(a)*r;e.dy=Number(e.dy)+c/2}else{u=a,l=o/r*u;var d=(Number(n)-Number(l))/Number(n)*o;e.dx=Number(e.dx)+d/2}t.drawImage(e.url,0,0,o,r,e.dx,e.dy,l,u),s.default.log("mode为aspectFit的图片绘制完毕")},aspectFill:function(t,e){uni.getSystemInfoSync().pixelRatio;s.default.log("准备绘制mode为aspectFill的图片");var i=e.imageInfo,n=e.dWidth,a=e.dHeight,r=i.height,o=i.width,l=0,u=0,c=o,d=r,f=n,h=r/o*f;if(h<a){s.default.log("绘制高度 小于 预定高度"),h=a,f=o/r*h;var g=(Number(f)-Number(n))/Number(f)*o;l=g/2,c=o-g}else{var b=(Number(h)-Number(a))/Number(h)*r;u=b/2,d=r-b}s.default.log("aspectFill 最终绘制: sx: ".concat(l,", sy: ").concat(u,", sWidth: ").concat(c,", sHeight: ").concat(d,", dx: ").concat(e.dx,", dy: ").concat(e.dy,", dWidth: ").concat(n,", dHeight: ").concat(a)),t.drawImage(e.url,l,u,c,d,e.dx,e.dy,n,a),s.default.log("mode为aspectFill的图片绘制完毕")}};function O(t,e){if(s.default.log("进入绘制默认图片方法, img:"+JSON.stringify(e)),e.url){var i=!s.default.isUndef(e.alpha);e.alpha=Number(s.default.isUndef(e.alpha)?1:e.alpha),t.setGlobalAlpha(e.alpha),s.default.log("绘制默认图片方法, 有url"),void 0===e.dHeight&&(e.dHeight=e.imageInfo.height),void 0===e.dWidth&&(e.dWidth=e.imageInfo.width);var n=L[e.mode];n?n(t,e):e.dWidth&&e.dHeight&&e.sx&&e.sy&&e.sWidth&&e.sHeight?(s.default.log("绘制默认图片方法, 绘制第一种方案"),t.drawImage(e.url,Number(e.sx)||!1,Number(e.sy)||!1,Number(e.sWidth)||!1,Number(e.sHeight)||!1,Number(e.dx||0),Number(e.dy||0),Number(e.dWidth)||!1,Number(e.dHeight)||!1)):e.dWidth&&e.dHeight?(s.default.log("绘制默认图片方法, 绘制第二种方案"),t.drawImage(e.url,Number(e.dx||0),Number(e.dy||0),Number(e.dWidth)||!1,Number(e.dHeight)||!1)):(s.default.log("绘制默认图片方法, 绘制第三种方案"),t.drawImage(e.url,Number(e.dx||0),Number(e.dy||0))),i&&t.setGlobalAlpha(1)}s.default.log("绘制默认图片方法, 绘制完毕")}function E(t,e){s.default.log("进入绘制圆形图片方法, obj:"+JSON.stringify(e));var i,n,a,r,o=e.dx,l=e.dy,u=e.dWidth,c=e.dHeight,d=e.circleSet;e.imageInfo;("object"===typeof d&&(i=d.x,n=d.y,a=d.r),a)||(r=u>c?c:u,a=r/2);i=i?o+i:(o||0)+a,n=n?l+n:(l||0)+a,t.save(),t.beginPath(),t.arc(i,n,a,0,2*Math.PI,!1),t.closePath(),t.setGlobalAlpha(0),t.fillStyle="#FFFFFF",t.fill(),t.setGlobalAlpha(1),t.clip(),O(t,e),s.default.log("默认图片绘制完毕"),t.restore()}function z(t,e){s.default.log("进入绘制矩形图片方法, obj:"+JSON.stringify(e)),t.save();var i,n=e.dx,a=e.dy,r=e.dWidth,o=e.dHeight,l=e.roundRectSet;e.imageInfo;"object"===typeof l&&(i=l.r),i=i||.1*r,r<2*i&&(i=r/2),o<2*i&&(i=o/2),t.beginPath(),t.arc(n+i,a+i,i,1*Math.PI,1.5*Math.PI),t.lineTo(n+r-i,a),t.arc(n+r-i,a+i,i,1.5*Math.PI,0),t.lineTo(n+r,a+o-i),t.arc(n+r-i,a+o-i,i,0,.5*Math.PI),t.lineTo(n+i,a+o),t.arc(n+i,a+o-i,i,.5*Math.PI,1*Math.PI),t.lineTo(n,a+i),t.closePath(),t.setGlobalAlpha(0),t.fillStyle="#FFFFFF",t.fill(),t.setGlobalAlpha(1),t.clip(),O(t,e),t.restore(),s.default.log("进入绘制矩形图片方法, 绘制完毕")}function j(t,e){s.default.log("进入绘制二维码方法"),s.default.showLoading("正在生成二维码");for(var i=[],n={text:String(e.text||"")||"",size:Number(e.size||0)||200,background:String(e.background||"")||"#ffffff",foreground:String(e.foreground||"")||"#000000",pdground:String(e.pdground||"")||"#000000",correctLevel:Number(e.correctLevel||0)||3,image:String(e.image||"")||"",imageSize:Number(e.imageSize||0)||40,dx:Number(e.dx||0)||0,dy:Number(e.dy||0)||0},a=null,r=0,o=0,u=i.length;o<u;o++)if(r=o,i[o].text==n.text&&i[o].text.correctLevel==n.correctLevel){a=i[o].obj;break}r==u&&(a=new l.default(n.text,n.correctLevel),i.push({text:n.text,correctLevel:n.correctLevel,obj:a}));for(var c=function(t){var e=t.options;return e.pdground&&(t.row>1&&t.row<5&&t.col>1&&t.col<5||t.row>t.count-6&&t.row<t.count-2&&t.col>1&&t.col<5||t.row>1&&t.row<5&&t.col>t.count-6&&t.col<t.count-2)?e.pdground:e.foreground},d=a.getModuleCount(),f=n.size,h=n.imageSize,g=(f/d).toPrecision(4),b=(f/d).toPrecision(4),v=0;v<d;v++)for(var m=0;m<d;m++){var p=Math.ceil((m+1)*g)-Math.floor(m*g),w=Math.ceil((v+1)*g)-Math.floor(v*g),y=c({row:v,col:m,count:d,options:n});t.setFillStyle(a.modules[v][m]?y:n.background),t.fillRect(n.dx+Math.round(m*g),n.dy+Math.round(v*b),p,w)}if(n.image){var x=function(t,e,i,a,r,o,s,l,u){t.setLineWidth(s),t.setFillStyle(n.background),t.setStrokeStyle(n.background),t.beginPath(),t.moveTo(e+o,i),t.arcTo(e+a,i,e+a,i+o,o),t.arcTo(e+a,i+r,e+a-o,i+r,o),t.arcTo(e,i+r,e,i+r-o,o),t.arcTo(e,i,e+o,i,o),t.closePath(),l&&t.fill(),u&&t.stroke()},k=n.dx+Number(((f-h)/2).toFixed(2)),T=n.dy+Number(((f-h)/2).toFixed(2));x(t,k,T,h,h,2,6,!0,!0),t.drawImage(n.image,k,T,h,h)}s.default.log("进入绘制二维码方法完毕"),s.default.hideLoading()}function R(t){t.backgroundImage,t.type;return new Promise(function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(i,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s.default.showLoading("正在获取海报背景图"),e.next=4,B(t);case 4:a=e.sent,s.default.hideLoading(),i(a),e.next=15;break;case 9:e.prev=9,e.t0=e["catch"](0),s.default.hideLoading(),s.default.showToast("获取分享用户背景图失败:"+JSON.stringify(e.t0)),s.default.log(JSON.stringify(e.t0)),n(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,i){return e.apply(this,arguments)}}())}function B(t,e){var i=t.backgroundImage;t.type;return s.default.log("获取分享背景图, 尝试清空本地数据"),new Promise(function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(n,a){var o,l,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,s.default.showLoading("正在下载海报背景图"),s.default.log("没有从后端获取的背景图片路径, 尝试从后端获取背景图片路径"),!i){e.next=7;break}e.t0=i,e.next=10;break;case 7:return e.next=9,s.default.getPosterUrl(t);case 9:e.t0=e.sent;case 10:return o=e.t0,e.next=13,P(o);case 13:return o=e.sent,s.default.log("尝试下载并保存背景图:"+o),e.next=17,s.default.downLoadAndSaveFile_PromiseFc(o);case 17:if(l=e.sent,!l){e.next=31;break}return s.default.log("下载并保存背景图成功:"+l),e.next=22,s.default.getImageInfo_PromiseFc(o);case 22:u=e.sent,s.default.log("获取图片信息成功"),c={path:l,width:u.width,height:u.height,name:s.default.fileNameInPath(o)},s.default.log("拼接背景图信息对象成功:"+JSON.stringify(c)),s.default.hideLoading(),s.default.log("返回背景图信息对象"),n((0,r.default)({},c)),e.next=33;break;case 31:s.default.hideLoading(),a("not find savedFilePath");case 33:e.next=38;break;case 35:e.prev=35,e.t1=e["catch"](0),a(e.t1);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,i){return e.apply(this,arguments)}}())}t.exports={getSharePoster:f,setText:p,setImage:T,drawText:C,drawImage:_,drawQrCode:j,drawFillRect:g,drawStrokeRect:b,drawRoundStrokeRect:v,drawRoundFillRect:m}},cd1b:function(t,e,i){"use strict";var n=i("d6c3"),a=i.n(n);a.a},d6c3:function(t,e,i){var n=i("0780");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("e09c3eb0",n,!0,{sourceMap:!1,shadowMode:!1})},db90:function(t,e,i){"use strict";function n(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=n}}]);